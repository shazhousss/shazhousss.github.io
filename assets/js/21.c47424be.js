(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{288:function(t,n,s){"use strict";s.r(n);var e=s(13),a=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"微信h5开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#微信h5开发"}},[t._v("#")]),t._v(" 微信H5开发")]),t._v(" "),n("h4",{attrs:{id:"应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[t._v("#")]),t._v(" 应用")]),t._v(" "),n("p",[t._v("vue2、vue-cli4.5、postcss-px-to-viewport、vant、weixin-js-sdk、iconfont、stylus、vue-clipboard2、vue-cookies、vue-pdf、moment、validator、jsencrypt等")]),t._v(" "),n("h4",{attrs:{id:"适配方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#适配方案"}},[t._v("#")]),t._v(" 适配方案")]),t._v(" "),n("p",[t._v("postcss-px-to-viewprot配合postcss.config.js配置，统一转换为视窗单位VW，针对vant缩放问题，设置vant插件的视窗宽度viewportWidth。配置如下：")]),t._v(" "),n("h4",{attrs:{id:"注意-postcss-px-to-viewport的landscape必须设置为false-否则会报错-应该是插件问题-所以暂无法做横屏适配。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意-postcss-px-to-viewport的landscape必须设置为false-否则会报错-应该是插件问题-所以暂无法做横屏适配。"}},[t._v("#")]),t._v(" 注意：postcss-px-to-viewport的landscape必须设置为false，否则会报错，应该是插件问题，所以暂无法做横屏适配。")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const path = require('path');\n\nmodule.exports=({file})=>{\n  const designWidth = file.dirname.includes(path.join('node_modules', 'vant')) ? 375 : 750;\n  const designHeight = file.dirname.includes(path.join('node_modules', 'vant')) ? 667 : 1334;\n  return{\n    plugins: {\n      'postcss-px-to-viewport': {\n        viewportWidth:designWidth, // 视窗的宽度，对应的是我们设计稿的宽度，一般是750\n        unitPrecision: 3, // 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）\n        viewportUnit: 'vw', // 指定需要转换成的视窗单位，建议使用vw\n        // propList: ['*', '!background-image'],\n        selectorBlackList: [\n          // 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名\n          'ignore',\n        ],\n        minPixelValue: 1, // 小于或等于`1px`不转换为视窗单位\n        mediaQuery: false, // 允许在媒体查询中转换`px`\n        landscape: false,\n        landscapeUnit: 'vw', //横屏时使用的单位\n        landscapeWidth: designHeight //横屏时使用的视口宽度\n        // exclude: /(\\/|\\\\)(node_modules)(\\/|\\\\)/\n      },\n      'autoprefixer':{ // 配置使用 autoprefixer\n          overrideBrowserslist: ['last 20 versions'] // 记得这里要把 browsers 改为\n      }\n    }\n  }\n}\n//APP.vue mounted添加以下代码，做横竖屏判断\nmounted(){\n\twindow.addEventListener(\"onorientationchange\" in window ? \"orientationchange\" : \"resize\", function() {\n\t\tif (window.orientation === 180 || window.orientation === 0) {\n\t\t}\n\t\tif (window.orientation === 90 || window.orientation === -90 ){\n\t\t}\n\t}, false)\n},\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br")])]),n("h4",{attrs:{id:"一、public-index-html配置如下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、public-index-html配置如下"}},[t._v("#")]),t._v(" 一、public index.html配置如下")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<!DOCTYPE html>\n<html lang="en"></html>\n<head>\n\t<meta charset="utf-8">\n\t<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />\n\t<meta http-equiv="Pragma" content="no-cache">\n\t<meta http-equiv="no-cache">\n\t<meta http-equiv="Expires" content="0">\n\t<meta http-equiv="Cache-Control" content="no-cache">\n\t<meta name="format-detection" content="telephone=no">\n\t\x3c!-- uc强制竖屏 --\x3e\n    <meta name="screen-orientation" content="portrait">\n    \x3c!-- QQ强制竖屏 --\x3e\n    <meta name="x5-orientation" content="portrait">\n    \x3c!-- UC强制全屏 --\x3e\n    <meta name="full-screen" content="yes">\n    \x3c!-- QQ强制全屏 --\x3e\n    <meta name="x5-fullscreen" content="true">\n    \x3c!-- UC应用模式 --\x3e\n    <meta name="browsermode" content="application">\n    \x3c!-- QQ应用模式 --\x3e\n    <meta name="x5-page-mode" content="app">\n    \x3c!-- windows phone 点击无高光 --\x3e\n    <meta name="msapplication-tap-highlight" content="no" />\n\t<title>您有一张汪峰线上VR乐享会门票请查收！</title>\n\t\x3c!-- 自己的 --\x3e\n\t\x3c!-- <link rel="stylesheet" href="//at.alicdn.com/t/font_2430671_joe9jiujppa.css">\n\t<link rel="stylesheet" href="//at.alicdn.com/t/font_2454183_rbbpbjo4s2a.css">\n\t<link rel="stylesheet" href="//at.alicdn.com/t/font_2234475_tq5081l0xlo.css"> --\x3e\n\t\x3c!-- <script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"><\/script>\n\t<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"><\/script> --\x3e\n\n\t<link rel="stylesheet" href="//at.alicdn.com/t/font_3108963_sfolyqo78sn.css">\n\t<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"><\/script>\n\t<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.6.0.js"><\/script>\n</head>\n\t<body style="height:100%;">\n\t<noscript>\n\t\t<strong>We\'re sorry but <%= htmlWebpackPlugin.options.title %> doesn\'t work properly without JavaScript enabled. Please enable it to continue.</strong>\n\t</noscript>\n\t<div id="app"></div>\n\t\x3c!-- built files will be auto injected --\x3e\n\t</body>\n\t<script>\n\t\twx.config({\n\t\t\tdebug: false,\n\t\t\tappId: \'<?php echo $signPackage["appId"];?>\',\n\t\t\ttimestamp: \'<?php echo $signPackage["timestamp"];?>\',\n\t\t\tnonceStr: \'<?php echo $signPackage["nonceStr"];?>\',\n\t\t\tsignature: \'<?php echo $signPackage["signature"];?>\',\n\t\t\tjsApiList: [\n\t\t\t\t// 所有要调用的 API 都要加到这个列表中\n\t\t\t\t\'onMenuShareTimeline\',\n\t\t\t\t\'onMenuShareAppMessage\',\n\t\t\t\t\'updateAppMessageShareData\',\n\t\t\t\t\'updateTimelineShareData\',\n\t\t\t\t\'chooseImage\',\n\t\t\t\t\'uploadImage\'\n\t\t\t],\n\t\t\topenTagList:[\'wx-open-launch-weapp\']\n\t\t});\n\t\twx.ready(function () {\n\t\t\t// 在这里调用 API\n\t\t\tvar nickname=\'<?php echo $userinfo["nickname"];?>\'\n\t\t\tvar headimgurl=\'<?php echo $userinfo["headimgurl"];?>\'\n\t\t\tvar openid=\'<?php echo $openid;?>\'\n\t\t\tvar userinfo=\'<?php echo $userinfo;?>\'\n\t\t\tsessionStorage.setItem(\'openid\',openid)\n\t\t\tsessionStorage.setItem(\'nickname\',nickname)\n\t\t\tsessionStorage.setItem(\'headimgurl\',headimgurl)\n\n\t\t\twx.onMenuShareTimeline({\n\t\t\t\ttitle: \'您有一张汪峰线上VR乐享会门票请查收！\', // 分享标题\n\t\t\t\tlink: \'http://www.gongwen.space/item/wangfeng/index.php\', // 分享链接\n\t\t\t\timgUrl: \'http://www.gongwen.space/item/wangfeng/img/share.jpg\', // 分享图标\n\t\t\t\tsuccess: function () {\n\t\t\t\t\t// 用户确认分享后执行的回调函数\n\t\t\t\t},\n\t\t\t\tcancel: function () {\n\t\t\t\t\t// 用户取消分享后执行的回调函数\n\t\t\t\t}\n\t\t\t});\n\t\t\twx.onMenuShareAppMessage({\n\t\t\t\ttitle:\'您有一张汪峰线上VR乐享会门票请查收！\', // 分享标题\n\t\t\t\tdesc:\'预约汪峰线上VR乐享会门票，Pico等你领回家！\', // 分享描述\n\t\t\t\tlink: \'http://www.gongwen.space/item/wangfeng/index.php\', // 分享链接\n\t\t\t\timgUrl: \'http://www.gongwen.space/item/wangfeng/img/share.jpg\', // 分享图标\n\t\t\t\ttype: \'\', // 分享类型,music、video或link，不填默认为link\n\t\t\t\tdataUrl: \'\', // 如果type是music或video，则要提供数据链接，默认为空\n\t\t\t\tsuccess: function () {\n\t\t\t\t\t// 用户确认分享后执行的回调函数\n\t\t\t\t},\n\t\t\t\tcancel: function () {\n\t\t\t\t\t// 用户取消分享后执行的回调函数\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t<\/script>\n</html>\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br"),n("span",{staticClass:"line-number"},[t._v("98")]),n("br"),n("span",{staticClass:"line-number"},[t._v("99")]),n("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);